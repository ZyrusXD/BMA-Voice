{% extends "admin/change_list.html" %}
{% load i18n %}

{% block content_title %}
    
    {{ block.super }}

    <div class="module" id="executive-dashboard">
        <h2 style="margin-bottom: 12px;">üìä ‡∏™‡∏£‡∏∏‡∏õ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£ (Strategy 7)</h2>
        
        <div class="row">
            
            <div class="col-md-4">
                <div class="card">
                    <div class="card-header">
                        <strong>‡∏™‡∏£‡∏∏‡∏õ 9 ‡∏î‡πâ‡∏≤‡∏ô (‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå)</strong>
                    </div>
                    <ul class="list-group list-group-flush">
                        {% for item in policy_summary %}
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                {{ item.policy_aspect }}
                                <span class="badge 
                                    {% if item.avg_sentiment > 0.5 %} bg-success 
                                    {% elif item.avg_sentiment < -0.5 %} bg-danger
                                    {% else %} bg-secondary {% endif %}">
                                    {{ item.avg_sentiment|floatformat:2 }}
                                </span>
                            </li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
            
            <div class="col-md-4">
                <div class="card">
                    <div class="card-header">
                        <strong>‡∏™‡∏£‡∏∏‡∏õ 5 ‡πÄ‡∏Ç‡∏ï‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏Ç‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î</strong>
                    </div>
                    <ul class="list-group list-group-flush">
                        {% for item in district_summary_top5 %}
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                                {{ item.district }}
                                <span class="badge bg-success">{{ item.avg_sentiment|floatformat:2 }}</span>
                            </li>
                        {% empty %}
                            <li class="list-group-item">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</li>
                        {% endfor %}
                    </ul>
                    <hr style="margin: 0;">
                    <div class="card-header">
                        <strong>‡∏™‡∏£‡∏∏‡∏õ 5 ‡πÄ‡∏Ç‡∏ï‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡∏î‡∏π‡πÅ‡∏•‡∏î‡πà‡∏ß‡∏ô</strong>
                    </div>
                    <ul class="list-group list-group-flush">
                        
                        {% for item in district_summary_bottom5 %}
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                                {{ item.district }}
                                <span class="badge bg-danger">{{ item.avg_sentiment|floatformat:2 }}</span>
                            </li>
                        {% empty %}
                            <li class="list-group-item">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</li>
                        {% endfor %}
                    </ul>
                </div>
            </div>

            <div class="col-md-4">
                <div class="card">
                    <div class="card-header">
                        <strong>‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á (‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î)</strong>
                    </div>
                    <ul class="list-group list-group-flush">
                        {% for item in status_summary %}
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                {% if item.status == 'open' %} 
                                    <span class="fw-bold text-primary">‡∏£‡∏±‡∏ö‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß</span>
                                {% elif item.status == 'progress' %} 
                                    <span class="fw-bold text-warning">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</span>
                                {% elif item.status == 'resolved' %} 
                                    <span class="fw-bold text-success">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</span>
                                {% else %} 
                                    <span class="fw-bold text-secondary">‡∏õ‡∏¥‡∏î‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á</span>
                                {% endif %}
                                <span class="badge bg-dark rounded-pill">{{ item.total }} ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á</span>
                            </li>
                        {% endfor %}
                    </ul>
                </div>
            </div>

        </div>
    </div>
{% endblock %}

{% block extrastyle %}
    {{ block.super }}
    <link href="https.cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
{% endblock %}